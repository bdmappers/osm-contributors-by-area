L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0},initialize:function(a,b){L.setOptions(this,b);var c=this._contentContainer=L.DomUtil.get(a);c.parentNode.removeChild(c);var d="leaflet-",e=this._container=L.DomUtil.create("div",d+"sidebar "+this.options.position);if(L.DomUtil.addClass(c,d+"control"),e.appendChild(c),this.options.closeButton){var f=this._closeButton=L.DomUtil.create("a","close",e);f.innerHTML="&times;"}},addTo:function(a){var b=this._container,c=this._contentContainer;if(this.options.closeButton){var d=this._closeButton;L.DomEvent.on(d,"click",this.hide,this)}L.DomEvent.on(b,"transitionend",this._handleTransitionEvent,this).on(b,"webkitTransitionEnd",this._handleTransitionEvent,this);var e=a._controlContainer;e.insertBefore(b,e.firstChild),this._map=a;var f=L.DomEvent.stopPropagation;return L.DomEvent.on(c,"click",f).on(c,"mousedown",f).on(c,"touchstart",f).on(c,"dblclick",f).on(c,"mousewheel",f).on(c,"MozMousePixelScroll",f),this},removeFrom:function(a){this.hide();var b=this._contentContainer,c=a._controlContainer;c.removeChild(this._container),this._map=null;var d=L.DomEvent.stopPropagation;if(L.DomEvent.off(b,"click",d).off(b,"mousedown",d).off(b,"touchstart",d).off(b,"dblclick",d).off(b,"mousewheel",d).off(b,"MozMousePixelScroll",d),L.DomEvent.off(container,"transitionend",this._handleTransitionEvent,this).off(container,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var e=this._closeButton;L.DomEvent.off(e,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(a){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),a&&L.DomEvent.stopPropagation(a)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(a){return this.getContainer().innerHTML=a,this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(a){("left"==a.propertyName||"right"==a.propertyName)&&this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar=function(a,b){return new L.Control.Sidebar(a,b)};